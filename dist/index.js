!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("prop-types"),require("better-scroll")):"function"==typeof define&&define.amd?define(["react","prop-types","better-scroll"],t):"object"==typeof exports?exports.indexList=t(require("react"),require("prop-types"),require("better-scroll")):e.indexList=t(e.React,e.PropTypes,e.BScroll)}(window,function(e,t,r){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=12)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,r){var n=r(9),o=r(5);e.exports=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?o(e):t}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t,r){var n=r(10);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)}},function(e,t){e.exports=r},function(e,t){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(t){return"function"==typeof Symbol&&"symbol"===r(Symbol.iterator)?e.exports=n=function(e){return r(e)}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":r(e)},n(t)}e.exports=n},function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,n)}e.exports=r},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(2),o=r.n(n),l=r(3),c=r.n(l),i=r(4),a=r.n(i),u=r(6),s=r.n(u),f=r(7),p=r.n(f),h=r(0),d=r.n(h),y=r(1),m=r.n(y),b=r(5),v=r.n(b),S=r(8),x=r.n(S),g=function(e){function t(){var e,r;o()(this,t);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(r=a()(this,(e=s()(t)).call.apply(e,[this].concat(l))))._initScroll=function(){var e=r.props,t=e.probeType,n=e.click,o=e.listenScroll,l=e.pullup,c=e.beforeScroll,i=e.handleScroll,a=e.handleScrollToEnd,u=e.handleBeforeScroll;if(r.wrapper){if(r.scroll=new x.a(r.wrapper,{probeType:t,click:n}),o){v()(v()(r));r.scroll.on("scroll",function(e){i(e)})}l&&r.scroll.on("scrollEnd",function(){r.scroll.y<=r.scroll.maxScrollY+50&&a()}),c&&r.scroll.on("beforeScrollStart",function(){u()})}},r.disable=function(){r.scroll&&r.scroll.disable()},r.enable=function(){r.scroll&&r.scroll.enable()},r.refresh=function(){r.scroll&&r.scroll.refresh()},r.scrollTo=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.scroll&&r.scroll.scrollTo.apply(r.scroll,t)},r.scrollToElement=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.scroll&&r.scroll.scrollToElement.apply(r.scroll,t)},r}return p()(t,e),c()(t,[{key:"componentDidMount",value:function(){this._initScroll()}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.data!==this.props.data&&setTimeout(function(){t.refresh()},this.props.refreshDelay)}},{key:"render",value:function(){var e=this,t=this.props,r=t.children,n=t.className;return d.a.createElement("div",{ref:function(t){return e.wrapper=t},className:n},r)}}]),t}(h.PureComponent);g.defaultProps={probeType:1,click:!0,listenScroll:!1,data:[],pullup:!1,beforeScroll:!1,refreshDelay:20},g.propTypes={probeType:m.a.number,click:m.a.bool,listenScroll:m.a.bool,data:m.a.array,pullup:m.a.bool,beforeScroll:m.a.bool,refreshDelay:m.a.number};var T=g,w=function(e,t,r){return r?e.setAttribute("data-"+t,r):e.getAttribute("data-"+t)},E=(r(11),30),_=18,j=function(e){function t(e){var r;return o()(this,t),(r=a()(this,s()(t).call(this,e))).onShortcutTouchStart=function(e){var t=w(e.target,"index"),n=e.touches[0];r.touch.y1=n.pageY,r.touch.anchorIndex=t,r._scrollTo(t)},r.onShortcutTouchMove=function(e){e.preventDefault();var t=e.touches[0];r.touch.y2=t.pageY;var n=(r.touch.y2-r.touch.y1)/_|0,o=parseInt(r.touch.anchorIndex,10)+n;r._scrollTo(o)},r.refresh=function(){r.listView.refresh()},r.scroll=function(e){r.scrollY=e.y,r.handleScrollYChange(e.y)},r.handleScrollYChange=function(e){var t=r.listHeight,n=r.state.currentIndex;if(e>0)r.setState({currentIndex:0},r.changeTitle);else{for(var o=0;o<t.length-1;o++){var l=t[o],c=t[o+1];if(-e>=l&&-e<c)return n!==o&&r.setState({currentIndex:o},r.changeTitle),r.diff=c+e,void r.handleDiffChange()}r.setState({currentIndex:t.length-2},r.changeTitle)}},r.changeTitle=function(){var e=r.props.data,t=r.state.currentIndex;if(r.scrollY>0)r.setState({fixedTitle:""});else{var n=e[t]?e[t].title:"";r.setState({fixedTitle:n})}},r.handleDiffChange=function(){var e=r.diff,t=e>0&&e<E?e-E:0;r.fixedTop!==t&&(r.fixedTop=t,r.fixed.style.transform="translate3d(0,".concat(t,"px,0)"))},r._calculateHeight=function(){r.listHeight=[];var e=r.listGroup,t=0;r.listHeight.push(t),e.forEach(function(e,n){t+=e.clientHeight,r.listHeight.push(t)})},r._scrollTo=function(e){(e||0===e)&&(e<0?e=0:e>r.listHeight.length-2&&(e=r.listHeight.length-2),r.scrollY=-r.listHeight[e],r.handleScrollYChange(r.scrollY),r.listView.scrollToElement(r.listGroup[e],0))},r.selectItem=function(e){var t=r.props.onSelect;t&&t(e)},r.state={currentIndex:0,fixedTitle:"",shortcutList:e.data.map(function(e){return e.title.substr(0,1)})},r.diff=-1,r.scrollY=-1,r.probeType=3,r.listenScroll=!0,r.touch={},r.listHeight=[],r.listGroup=[],r}return p()(t,e),c()(t,[{key:"componentWillReceiveProps",value:function(e){e.data!==this.props.data&&this.setState({shortcutList:e.data.map(function(e){return e.title.substr(0,1)})},this._calculateHeight)}},{key:"componentDidMount",value:function(){this._calculateHeight()}},{key:"render",value:function(){var e=this,t=this.props,r=t.data,n=t.renderItem,o=t.className,l=this.state,c=l.shortcutList,i=l.fixedTitle,a=l.currentIndex;return d.a.createElement(T,{className:"listview ".concat(o),data:r,probeType:this.probeType,listenScroll:this.listenScroll,handleScroll:this.scroll,ref:function(t){return e.listView=t}},d.a.createElement("ul",null,r.map(function(t,r){return d.a.createElement("li",{className:"list-group",ref:function(t){return e.listGroup[r]=t},key:r},d.a.createElement("h2",{className:"list-group-title"},t.title),d.a.createElement("ul",null,t.items.map(function(t,r){return d.a.createElement("li",{className:"list-group-item",key:r,onClick:function(){return e.selectItem(t)}},n?n(t):d.a.createElement("span",{className:"name"},t.name))})))})),d.a.createElement("div",{className:"list-shortcut",onTouchStart:this.onShortcutTouchStart,onTouchMove:this.onShortcutTouchMove},d.a.createElement("ul",null,c.map(function(e,t){var r=a===t?"item current":"item";return d.a.createElement("li",{key:e,"data-index":t,className:r},e)}))),d.a.createElement("div",{className:"list-fixed",ref:function(t){return e.fixed=t}},i?d.a.createElement("div",{className:"fixed-title"},i):null))}}]),t}(h.PureComponent);j.defaultProps={data:[]},j.propTypes={data:m.a.array.isRequired,onSelect:m.a.func,className:m.a.string};t.default=j}])});
//# sourceMappingURL=index.js.map